(function(a){function u(b){return!b||void 0!==b.allowPageScroll||void 0===b.swipe&&void 0===b.swipeStatus||(b.allowPageScroll=h),b||(b={}),b=a.extend({},a.fn.swipe.defaults,b),this.each(function(){var c=a(this),d=c.data(s);d||(d=new v(this,b),c.data(s,d))})}function v(t,u){function O(b){if(!(fb()||a(b.target).closest(u.excludedElements,H).length>0)){b=b.originalEvent;var c,d=q?b:r?b.touches[0]:b;return I=m,r?J=q?1:b.touches.length:b.preventDefault(),A=0,B=null,G=null,C=0,D=0,E=0,F=1,K=hb(),!r||J===u.fingers||u.fingers===l||db()?(K[0].start.x=K[0].end.x=d.pageX,K[0].start.y=K[0].end.y=d.pageY,L=bb(),2==J&&(K[1].start.x=K[1].end.x=b.touches[1].pageX,K[1].start.y=K[1].end.y=b.touches[1].pageY,D=E=X(K[0].start,K[1].start)),(u.swipeStatus||u.pinchStatus)&&(c=S(b,I))):(R(b),c=!1),c===!1?(I=p,S(b,I),c):(gb(!0),H.bind(x,P),H.bind(y,Q),void 0)}}function P(a){if(a=a.originalEvent,I!==o&&I!==p){var b,c=q?a:r?a.touches[0]:a;if(K[0].end.x=q?c.pageX:r?a.touches[0].pageX:c.pageX,K[0].end.y=q?c.pageY:r?a.touches[0].pageY:c.pageY,M=bb(),B=ab(K[0].start,K[0].end),r&&(J=q?1:a.touches.length),I=n,2==J&&(0==D?(K[1].start.x=a.touches[1].pageX,K[1].start.y=a.touches[1].pageY,D=E=X(K[0].start,K[1].start)):(K[1].end.x=a.touches[1].pageX,K[1].end.y=a.touches[1].pageY,E=X(K[0].end,K[1].end),G=Z(K[0].end,K[1].end)),F=Y(D,E)),J!==u.fingers&&u.fingers!==l&&r)I=p,S(a,I);else if(V(a,B),A=$(K[0].start,K[0].end),C=W(K[0].start,K[0].end),(u.swipeStatus||u.pinchStatus)&&(b=S(a,I)),!u.triggerOnTouchEnd){var d=!U();T()===!0?(I=o,b=S(a,I)):d&&(I=p,S(a,I))}b===!1&&(I=p,S(a,I))}}function Q(a){if(a=a.originalEvent,a.touches&&a.touches.length>0)return!0;if(a.preventDefault(),M=bb(),0!=D&&(E=X(K[0].end,K[1].end),F=Y(D,E),G=Z(K[0].end,K[1].end)),A=$(K[0].start,K[0].end),B=ab(K[0].start,K[0].end),C=W(),u.triggerOnTouchEnd||u.triggerOnTouchEnd===!1&&I===n){I=o;var b=eb()||!db(),c=J===u.fingers||u.fingers===l||!r,d=0!==K[0].end.x,e=c&&d&&b;if(e){var f=U(),g=T();g!==!0&&null!==g||!f?f&&g!==!1||(I=p,S(a,I)):S(a,I)}else I=p,S(a,I)}else I===n&&(I=p,S(a,I));H.unbind(x,P,!1),H.unbind(y,Q,!1),gb(!1)}function R(){J=0,M=0,L=0,D=0,E=0,F=1,gb(!1)}function S(a,h){var i=void 0;if(u.swipeStatus&&(i=u.swipeStatus.call(H,a,h,B||null,A||0,C||0,J)),u.pinchStatus&&eb()&&(i=u.pinchStatus.call(H,a,h,G||null,E||0,C||0,J,F)),h===p&&(!u.click||1!==J&&r||!isNaN(A)&&0!==A||(i=u.click.call(H,a,a.target))),h==o){switch(u.swipe&&(i=u.swipe.call(H,a,B,A,C,J)),B){case b:u.swipeLeft&&(i=u.swipeLeft.call(H,a,B,A,C,J));break;case c:u.swipeRight&&(i=u.swipeRight.call(H,a,B,A,C,J));break;case d:u.swipeUp&&(i=u.swipeUp.call(H,a,B,A,C,J));break;case e:u.swipeDown&&(i=u.swipeDown.call(H,a,B,A,C,J))}switch(G){case f:u.pinchIn&&(i=u.pinchIn.call(H,a,G||null,E||0,C||0,J,F));break;case g:u.pinchOut&&(i=u.pinchOut.call(H,a,G||null,E||0,C||0,J,F))}}return(h===p||h===o)&&R(a),i}function T(){return null!==u.threshold?A>=u.threshold:null}function U(){var a;return a=u.maxTimeThreshold?C>=u.maxTimeThreshold?!1:!0:!0}function V(a,f){if(u.allowPageScroll===h||db())a.preventDefault();else{var g=u.allowPageScroll===i;switch(f){case b:(u.swipeLeft&&g||!g&&u.allowPageScroll!=j)&&a.preventDefault();break;case c:(u.swipeRight&&g||!g&&u.allowPageScroll!=j)&&a.preventDefault();break;case d:(u.swipeUp&&g||!g&&u.allowPageScroll!=k)&&a.preventDefault();break;case e:(u.swipeDown&&g||!g&&u.allowPageScroll!=k)&&a.preventDefault()}}}function W(){return M-L}function X(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+d*d))}function Y(a,b){var c=1*(b/a);return c.toFixed(2)}function Z(){return 1>F?g:f}function $(a,b){return Math.round(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)))}function _(a,b){var c=a.x-b.x,d=b.y-a.y,e=Math.atan2(d,c),f=Math.round(180*e/Math.PI);return 0>f&&(f=360-Math.abs(f)),f}function ab(a,f){var g=_(a,f);return 45>=g&&g>=0?b:360>=g&&g>=315?b:g>=135&&225>=g?c:g>45&&135>g?e:d}function bb(){var a=new Date;return a.getTime()}function cb(){H.unbind(w,O),H.unbind(z,R),H.unbind(x,P),H.unbind(y,Q),gb(!1)}function db(){return u.pinchStatus||u.pinchIn||u.pinchOut}function eb(){return G&&db()}function fb(){return H.data(s+"_intouch")===!0?!0:!1}function gb(a){a=a===!0?!0:!1,H.data(s+"_intouch",a)}function hb(){for(var a=[],b=0;5>=b;b++)a.push({start:{x:0,y:0},end:{x:0,y:0},delta:{x:0,y:0}});return a}var v=r||!u.fallbackToMouseEvents,w=v?q&&"MSPointerDown"||"touchstart":"mousedown",x=v?q&&"MSPointerMove"||"touchmove":"mousemove",y=v?q&&"MSPointerUp"||"touchend":"mouseup",z="touchcancel",A=0,B=null,C=0,D=0,E=0,F=1,G=0,H=a(t),I="start",J=0,K=null,L=0,M=0;try{H.bind(w,O),H.bind(z,R)}catch(N){a.error("events not supported "+w+","+z+" on jQuery.swipe")}this.enable=function(){return H.bind(w,O),H.bind(z,R),H},this.disable=function(){return cb(),H},this.destroy=function(){return cb(),H.css({msTouchAction:""}).data(s,null),H}}var b="left",c="right",d="up",e="down",f="in",g="out",h="none",i="auto",j="horizontal",k="vertical",l="all",m="start",n="move",o="end",p="cancel",q=navigator.msPointerEnabled,r=q||"ontouchstart"in window,s="TouchSwipe",t={fingers:1,threshold:75,maxTimeThreshold:null,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,triggerOnTouchEnd:!0,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"button, input, select, textarea, a, .noSwipe"};a.fn.swipe=function(b){var c=a(this).css({msTouchAction:"none"}),d=c.data(s);if(d&&"string"==typeof b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));a.error("Method "+b+" does not exist on jQuery.swipe")}else if(!(d||"object"!=typeof b&&b))return u.apply(this,arguments);return c},a.fn.swipe.defaults=t,a.fn.swipe.phases={PHASE_START:m,PHASE_MOVE:n,PHASE_END:o,PHASE_CANCEL:p},a.fn.swipe.directions={LEFT:b,RIGHT:c,UP:d,DOWN:e,IN:f,OUT:g},a.fn.swipe.pageScroll={NONE:h,HORIZONTAL:j,VERTICAL:k,AUTO:i},a.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:l}})(jQuery);